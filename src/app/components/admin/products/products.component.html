<div class="card p-4">
    <div class="d-flex justify-content-between">
        <div class="col-6">
            <div class="group--search">
                <input type="text" class="form-control" id="defaultFormControlInput" placeholder="Tìm kiếm...."
                    aria-describedby="defaultFormControlHelp" [formControl]="inputControl">
                <button class="btn--search"><i class="fa-solid fa-magnifying-glass"></i></button>
            </div>
        </div>

        <div>
            <div class="btn-group">
                <button type="button" class="btn--dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    Giá
                    <i class="fa-solid fa-angle-down"></i>
                </button>
                <ul class="dropdown-menu" style="width: 19rem;">
                    <li class="px-3 py-2">
                        <input type="number" class="form-control" placeholder="Giá tối thiểu">
                    </li>
                    <li class="px-3 py-2">
                        <input type="number" class="form-control" placeholder="Giá tối đa">
                    </li>
                    <li class="px-3 py-2">
                        <button class="btn btn-primary d-flex align-items-center justify-content-between"
                            style="width: 100%;">
                            Lọc
                            <i class="fa-solid fa-filter"></i>
                        </button>
                    </li>
                </ul>
            </div>
        </div>

        <div>
            <div class="btn-group">
                <button type="button" class="btn--dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    Loại sản phẩm
                    <i class="fa-solid fa-angle-down"></i>
                </button>
                <ul class="dropdown-menu" style="width: 19rem;">
                    @for (item of arrCategory; track $index) {
                    <li>
                        <a class="dropdown-item" href="javascript:void(0);">
                            {{item.name}}
                        </a>
                    </li>
                    }
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li class="px-2 py-1">
                        <button class="btn btn-primary d-flex align-items-center justify-content-between"
                            style="width: 100%;">
                            Thêm
                            <i class="fa-solid fa-plus"></i>
                        </button>
                    </li>
                </ul>
            </div>
        </div>

        <div>
            <button class="btn btn-primary" (click)="isShow = true">
                Thêm sản phẩm mới
            </button>
        </div>

    </div>
</div>

@if(products.length > 0){
<!-- content -->
<div class="card mt-4">
    <div class="table-responsive text-nowrap">
        <table class="table">
            <thead class="table-dark">
                <tr>
                    <th style="color: white;">STT</th>
                    <th style="color: white;">Hình ảnh</th>
                    <th style="color: white;">Tên</th>
                    <th style="color: white;">Số lượng</th>
                    <th style="color: white;">Đơn giá</th>
                    <th style="color: white;">Kích thước</th>
                    <th style="color: white;">Trạng thái</th>
                    <th style="color: white;"></th>
                </tr>
            </thead>
            <tbody class="table-border-bottom-0 mt-4">
                <tr *ngFor="let item of products ; let i = index">
                    <td>
                        {{i + 1}}
                    </td>
                    <td>
                        <div class="btn--zoom avatar">
                            <img src="{{item.image + '=s100'}}">
                        </div>
                    </td>
                    <td>
                        <a class="btn-edit">
                            {{item.name}}
                        </a>
                    </td>
                    <td>
                        <a class="btn-edit">
                        </a>
                    </td>
                    <td>
                        <a class="btn-edit">
                            100.000 đ
                        </a>
                    </td>
                    <td>
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-outline-warning"
                                (click)="isShow = true; create = false; isVariant = true"
                                [routerLink]="['variant/'+ item.id]">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                        </div>
                    </td>
                    <td>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked">
                        </div>
                    </td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary" [routerLink]="[item.id]"
                            (click)="create = false ; isShow = true">
                            <i class="fa-regular fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="card mt-4 pt-3">
    <div class="d-flex justify-content-center align-items-center">
        <ul class="pagination">
            <li class="page-item" *ngFor="let item of numberPages" routerLinkActive="active">
                <a class="page-link" [routerLink]="['/admin/products/' + item]">
                    {{item}}
                </a>
            </li>
        </ul>
    </div>
</div>
<!-- content -->
}

<div class="d-flex justify-content-center mt-5" *ngIf="products.length == 0">
    <h2>
        <i class="fa-solid fa-filter-circle-xmark"></i>
        Không tìm thấy sản phẩm
    </h2>
</div>

<div class="mt-3">
    <!-- Modal -->
    <div class="modal fade" id="basicModal" tabindex="-1" style="display: none;" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        [routerLink]="['/admin/products']"></button>
                </div>
                <div class="modal-body" style="height: 50rem;">
                    <!-- <router-outlet></router-outlet> -->
                </div>
            </div>
        </div>
    </div>
</div>

<div class="model" [class.hidden]="!isShow">
    <div class="model--content" [class.model--variant]="isVariant">
        <div class="model--content--header">
            <h4 class="title m-0" *ngIf="!isVariant">
                {{create ? 'Thêm sản phẩm' : 'Cập nhật sản phẩm' }}
            </h4>
            <h4 class="title m-0" *ngIf="isVariant">
                Quản lý kích thước
            </h4>
            <button class="btn btn-sm btn-danger" (click)="isShow = false; create = true; isVariant = false"
                routerLink="/admin/products/{{isActive}}">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        <div class="model--content--body">
            <app-create-product *ngIf="create"></app-create-product>
            <!-- <app-update-products *ngIf="!create"></app-update-products> -->
            <router-outlet *ngIf="!create"></router-outlet>
        </div>
    </div>
</div>
<app-loading *ngIf="isLoading"></app-loading>